import{l as u,C as V,h as B,c as l,a as g,u as f,w as C,F as M,o as d,d as E,e,b as F,q as I,f as y,i as p,p as m,g as b,t as c,n as S}from"./app-D4hlugvQ.js";import{_ as $}from"./AuthenticatedLayout-D1ZQtyVg.js";import{_ as z}from"./Pagination-B5BAGLYI.js";import{d as A}from"./index-D-FUZXaP.js";/* empty css                    */const L={class:"overflow-x-auto"},Z={class:"min-w-full whitespace-no-wrap"},O={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},T={class:"text-gray-900 whitespace-no-wrap"},D={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},G={class:"text-gray-900 whitespace-no-wrap"},H={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},R={class:"text-gray-900 whitespace-no-wrap"},q={class:"border-b border-gray-200 bg-white px-5 py-5 text-sm"},J={class:"flex space-x-3"},K=["onClick"],Q=["onClick"],W=["onClick"],X={key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black bg-opacity-50"},Y={class:"bg-white p-6 rounded-lg shadow-lg w-96"},ee={class:"mb-4"},se={class:"mb-4"},te={class:"flex justify-end"},oe={key:1,class:"fixed inset-0 z-50 flex justify-center items-center bg-black bg-opacity-50"},re={class:"bg-white p-6 rounded-lg shadow-lg w-96"},ae={class:"mb-4"},le={key:0,class:"text-red-500 text-xs mt-1"},de={class:"mb-4"},ne={key:0,class:"text-red-500 text-xs mt-1"},ie={class:"flex justify-end"},ue=["disabled"],pe={class:"flex flex-col items-center border-t bg-white px-5 py-5 xs:flex-row xs:justify-between"},ge={__name:"Index",props:{users:Object},setup(v){const h=A.useToast(),k=u(!1),n=u(null),w=u(!1),r=u({userId:null,password:"",repeatPassword:""}),a=V({password:"",password_confirmation:""}),x=B(()=>r.value.password===r.value.repeatPassword),P=o=>{r.value.userId=o.id,w.value=!0},_=()=>{w.value=!1,r.value.password="",r.value.repeatPassword="",a.reset()},j=()=>{a.password=r.value.password,a.password_confirmation=r.value.repeatPassword,a.put(route("users.editPassword",r.value.userId),{preserveScroll:!0,onSuccess:o=>{h.success(o.props.flash.success),a.reset(),_()},onError:()=>{h.success("Error al actualizar la contraseña")}})},U=o=>{console.log("Abriendo modal para editar el usuario:",o),n.value={...o},a.nombre=o.name,a.correo=o.email,a.rol=o.rol,a.contraseña=o.password,k.value=!0},N=o=>{console.log("Eliminar usuario",o)};return(o,s)=>(d(),l(M,null,[g(f(E),{title:"Users"}),g($,null,{header:C(()=>s[6]||(s[6]=[e("div",{class:"text-center w-full mb-4"},[e("h1",{class:"font-semibold mb-5"},"Usuarios registrados"),e("hr",{class:"my-2 border-t-1 border-gray-900 w-full mx-auto"})],-1)])),default:C(()=>[s[18]||(s[18]=e("div",{class:"rounded-t mb-0 px-6 py-6"},[e("div",{class:"text-center flex justify-between"},[e("a",{href:"addUser",class:"bg-emerald-500 text-white active:bg-emerald-600 font-bold uppercase text-m px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 ease-linear transition-all duration-150 flex items-center"},[e("svg",{class:"w-4 h-4 mr-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 7.757v8.486M7.757 12h8.486M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})]),F(" Agregar ")])])],-1)),e("div",L,[e("table",Z,[s[10]||(s[10]=e("thead",null,[e("tr",{class:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Nombre "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Correo "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Rol "),e("th",{class:"border-b-2 border-gray-200 bg-gray-100 px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-600"}," Acciones ")])],-1)),e("tbody",null,[(d(!0),l(M,null,I(v.users.data,t=>(d(),l("tr",{key:t.id,class:"text-gray-700"},[e("td",O,[e("p",T,c(t.name),1)]),e("td",D,[e("p",G,c(t.email),1)]),e("td",H,[e("p",R,c(t.roles.map(i=>i.name).join(", ")),1)]),e("td",q,[e("div",J,[e("button",{class:"text-blue-500 hover:text-blue-700",onClick:i=>U(t)},s[7]||(s[7]=[e("svg",{class:"w-6 h-6 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"})],-1)]),8,K),e("button",{class:"text-yellow-500 hover:text-yellow-700",onClick:i=>P(t)},s[8]||(s[8]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11c.386 0 .75-.1 1.065-.275a1.5 1.5 0 0 0-.565-.41A1.5 1.5 0 1 0 12 11Zm0-4a5 5 0 1 1-4.9 5.9H5a7 7 0 1 0 7-7Z"})],-1)]),8,Q),e("a",{href:"#",class:"text-red-500 hover:text-red-700",onClick:y(i=>N(t.id),["prevent"])},s[9]||(s[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 6L6 18M6 6l12 12"})],-1)]),8,W)])])]))),128))])]),k.value?(d(),l("div",X,[e("div",Y,[s[14]||(s[14]=e("h3",{class:"text-xl font-semibold mb-4"},"Editar usuario",-1)),e("form",{onSubmit:s[3]||(s[3]=y((...t)=>o.submitForm&&o.submitForm(...t),["prevent"]))},[e("div",ee,[s[11]||(s[11]=e("label",{for:"nombre",class:"block text-sm font-medium text-gray-700"},"Nombre",-1)),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>n.value.name=t),type:"text",id:"nombre",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[m,n.value.name]])]),e("div",se,[s[12]||(s[12]=e("label",{for:"nombre",class:"block text-sm font-medium text-gray-700"},"Nombre",-1)),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>n.value.email=t),type:"text",id:"nombre",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[m,n.value.email]])]),e("div",te,[e("button",{type:"button",onClick:s[2]||(s[2]=(...t)=>o.closeModal&&o.closeModal(...t)),class:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 mr-2"}," Cancelar "),s[13]||(s[13]=e("button",{type:"submit",class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600"}," Guardar ",-1))])],32)])])):b("",!0),w.value?(d(),l("div",oe,[e("div",re,[s[17]||(s[17]=e("h3",{class:"text-xl font-semibold mb-4"},"Cambiar contraseña",-1)),e("form",{onSubmit:y(j,["prevent"])},[e("div",ae,[s[15]||(s[15]=e("label",{for:"newPassword",class:"block text-sm font-medium text-gray-700"},"Nueva contraseña",-1)),p(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>r.value.password=t),type:"password",id:"newPassword",ref:"passwordInput",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[m,r.value.password]]),f(a).errors.password?(d(),l("p",le,c(f(a).errors.password),1)):b("",!0)]),e("div",de,[s[16]||(s[16]=e("label",{for:"repeatPassword",class:"block text-sm font-medium text-gray-700"},"Repetir contraseña",-1)),p(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>r.value.repeatPassword=t),type:"password",id:"repeatPassword",class:S(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",{"border-red-500":!x.value}])},null,2),[[m,r.value.repeatPassword]]),x.value?b("",!0):(d(),l("p",ne," Las contraseñas no coinciden. "))]),e("div",ie,[e("button",{type:"button",onClick:_,class:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 mr-2"}," Cancelar "),e("button",{type:"submit",disabled:!x.value,class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600"}," Guardar ",8,ue)])],32)])])):b("",!0)]),e("div",pe,[g(z,{links:v.users.links},null,8,["links"])])]),_:1})],64))}};export{ge as default};
